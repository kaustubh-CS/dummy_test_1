name: Talisman

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Install Talisman
      run: |
        curl --silent https://thoughtworks.github.io/talisman/scripts/install.bash > install.bash
        chmod +x install.bash
        sed -i 's/read -p "PLEASE CHOOSE WHERE YOU WISH TO SET TALISMAN_HOME VARIABLE AND talisman binary PATH (Enter option number): " choice/choice=4/' install.bash
        sed -i 's/read -p "No git template directory is configured. Let'\''s add one./choice=1/' install.bash
        ./install.bash --pre-push

    - name: Run Talisman
      run: |
        ~/.talisman/bin/talisman --githook pre-push
